<html>
<head>
    <title>Voxel</title>
</head>
<body>
    <canvas id='canvas' width='960' height='720'/>
    <script>
        const canvas = document.getElementById('canvas');
        const context = canvas.getContext('2d');

        const camera = {
            width: 4,
            height: 4,
            x: 0,
            y: 0,
        };

        const pixelSize = 100;
        const width = 10;
        const height = 10;
        const pixels = [
            ['rgb(100,120,0)','rgb(100,120,0)','rgb(100,120,0)','rgb(100,120,0)','rgb(100,120,0)','rgb(100,120,0)','rgb(100,120,0)','rgb(100,120,0)','rgb(100,120,0)','rgb(100,120,0)'],
            ['rgb(100,120,0)','rgb(100,120,0)','rgb(100,120,0)','rgb(100,120,0)','rgb(100,120,0)','rgb(100,120,0)','rgb(100,120,0)','rgb(100,120,0)','rgb(100,120,0)','rgb(100,120,0)'],
            ['rgb(100,120,0)','rgb(100,120,0)','rgb(5,220,0)','rgb(100,120,0)','rgb(100,120,0)','rgb(100,120,0)','rgb(100,120,0)','rgb(100,120,0)','rgb(100,120,0)','rgb(100,120,0)'],
            ['rgb(100,120,0)','rgb(100,120,0)','rgb(100,120,0)','rgb(100,120,0)','rgb(100,120,0)','rgb(100,120,0)','rgb(100,120,0)','rgb(100,120,0)','rgb(100,120,0)','rgb(100,120,0)'],
            ['rgb(100,120,0)','rgb(100,120,0)','rgb(100,120,0)','rgb(100,120,0)','rgb(100,120,0)','rgb(100,120,0)','rgb(100,120,0)','rgb(100,120,0)','rgb(100,120,0)','rgb(100,120,0)'],
            ['rgb(100,120,0)','rgb(100,120,0)','rgb(100,120,0)','rgb(100,120,0)','rgb(100,120,0)','rgb(0,0,0)','rgb(100,120,0)','rgb(100,120,0)','rgb(100,120,0)','rgb(100,120,0)'],
            ['rgb(100,120,0)','rgb(100,120,0)','rgb(100,120,0)','rgb(100,120,0)','rgb(100,120,0)','rgb(100,120,0)','rgb(100,120,0)','rgb(100,120,0)','rgb(100,120,0)','rgb(100,120,0)'],
            ['rgb(100,120,0)','rgb(100,120,0)','rgb(100,120,0)','rgb(100,120,0)','rgb(100,120,0)','rgb(100,120,0)','rgb(100,120,0)','rgb(100,120,0)','rgb(100,120,0)','rgb(100,120,0)'],
            ['rgb(100,120,0)','rgb(100,120,0)','rgb(100,120,0)','rgb(100,120,0)','rgb(100,120,0)','rgb(100,120,0)','rgb(100,120,0)','rgb(100,120,0)','rgb(100,120,0)','rgb(100,120,0)'],
            ['rgb(100,120,0)','rgb(100,120,0)','rgb(100,120,0)','rgb(100,120,0)','rgb(100,120,0)','rgb(100,120,0)','rgb(100,120,0)','rgb(100,120,0)','rgb(100,120,0)','rgb(100,120,0)']
        ];

        const viewport = () => {
            const copy = pixels.slice();
            return copy.slice(camera.y, camera.height + camera.y).map(row => {
                const copy = row.slice();
                return copy.slice(camera.x, camera.width + camera.x);
            });
        }

        const draw = () => {
            const pixels = viewport();
            context.clearRect(0, 0, width*pixelSize, height*pixelSize);
            for (let y = 0; y < pixels.length; y++) {
                for (let x = 0; x < pixels[y].length; x++) {
                    context.fillStyle = pixels[y][x];
                    context.fillRect(x * pixelSize, y * pixelSize,  pixelSize,  pixelSize);
                }
            }
        }

        draw();

        document.onkeydown = (event) => {
            switch(event.keyCode) {
                case 37: { // left
                    camera.x -= 1;
                    break;
                }
                case 38: { // up
                    camera.y -= 1;
                    break;
                }
                case 39: { // right
                    camera.x += 1;
                    break;
                }
                case 40: { // down
                    camera.y += 1;
                    break;
                }
            }
            draw();
        }


    </script>
</body>
</html>